#!/bin/bash

APP_NAME="Canda"
ORIG_APP="/System/Applications/Utilities/Terminal.app"
NEW_APP="$HOME/Applications/$APP_NAME.app"
ICON_PATH="$HOME/Desktop/Canda.icns"  # <-- place your green C icon here

# 1. Copy Terminal to a new app called Canda
echo "Copying Terminal to $NEW_APP..."
cp -R "$ORIG_APP" "$NEW_APP"

# 2. Replace the icon if it exists
if [ -f "$ICON_PATH" ]; then
  echo "Replacing icon..."
  cp "$ICON_PATH" "$NEW_APP/Contents/Resources/Terminal.icns"
else
  echo "⚠️  Icon file $ICON_PATH not found — skipping icon replacement."
fi

# 3. Remove quarantine attributes
xattr -cr "$NEW_APP"

# 4. Re-sign the app (optional but recommended)
codesign --force --deep --sign - "$NEW_APP"

# 5. Done
echo "✅ $APP_NAME.app created at $NEW_APP"
open "$NEW_APP"
